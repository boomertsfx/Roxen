if("undefined"==typeof ROXEN||!ROXEN)var ROXEN={};
!function(){var e={array2object:function(e){for(var r={},n=0;n<e.length;n++)r[e[n]]=!0;return r},arrayUnique:function(e){return e.filter(function(r,n){return e.indexOf(r)===n})},indices:function(e){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(n);return r},bind:function(e,r){return function(){return r.apply(e,arguments)}},clone:function(e){function r(){}return r.prototype=e,new r},deepCompare:function(e,r){if(e===r)return!0;if(!(e instanceof Object&&r instanceof Object))return!1;if(e.constructor!==r.constructor)return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!r.hasOwnProperty(n))return!1;if(e[n]!==r[n]){if("object"!=typeof e[n])return!1;if(!deepCompare(e[n],r[n]))return!1}}for(n in r)if(r.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0},deepCopy:function(e){var r,n,t;if("[object Array]"===Object.prototype.toString.call(e)){for(r=[],t=e.length,n=0;t>n;n++)r[n]=arguments.callee(e[n]);return r}if(null===e)return null;if("object"==typeof e){r={};for(n in e)r[n]=arguments.callee(e[n]);return r}return e},createElement:function(e,r,n){var t=document.createElement(e);ROXEN.isString(r)&&YAHOO.util.Dom.addClass(t,r);for(var o in n)n.hasOwnProperty(o)&&t.setAttribute(o,n[o]);return t},createObject:function(e,r){for(var n={},t=0;t<e.length;t++)n[e[t]]=r[t];return n},createObjects:function(e,r){for(var n=[],t=0;t<r.length;t++)n.push(ROXEN.createObject(e,r[t]));return n},debugLog:function(e){ROXEN.AFS.call("debug-log",{message:e})},escape:function(e){return escape(e).replace(/\+/g,"%2B")},escapeURIComponent:function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\x27/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x27/g,"&apos;").replace(/\x22/g,"&quot;")},unescapeHTML:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"')},filter:function(e,r,n){for(var t=[],o=0;o<e.length;o++){var a=r.call(n,e[o],o,e);a&&t.push(e[o])}return t},dirname:function(e){if(!e||""===e)return"/";if("/"===e.charAt(e.length-1))return e;var r=e.split("/");return r.pop(),r.join("/")+"/"},basename:function(e){if(!e||""===e)return"";var r=e.lastIndexOf("/");return r>=0?e.substr(r+1):e},fromUTF8:function(e){return decodeURIComponent(escape(e))},generateId:function(){return YAHOO.util.Dom.generateId(null,"roxen-")},getISOTimeString:function(e){function r(e){return 10>e?"0"+e:e}return ROXEN.isUndefined(e)&&(e=new Date),r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())},hasValue:function(e,r){for(var n=0;n<e.length;n++)if(r[e[n]])return!0;return!1},inArray:function(e,r){for(var n=0;n<e.length;n++)if(e[n]===r)return!0;return!1},log:function(){if("undefined"!=typeof console&&console.log){var e=[ROXEN.getISOTimeString()+"(UTC): "].concat(Array.prototype.slice.call(arguments));console.log.apply(console,e)}},isArray:YAHOO.lang.isArray,isBoolean:YAHOO.lang.isBoolean,isFunction:YAHOO.lang.isFunction,isNull:YAHOO.lang.isNull,isNumber:YAHOO.lang.isNumber,isObject:YAHOO.lang.isObject,isString:YAHOO.lang.isString,isUndefined:YAHOO.lang.isUndefined,isValue:YAHOO.lang.isValue,isUSASCII:function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(32>n||n>126)return!1}return!0},ltrim:function(e){return e.replace(/^\s+/g,"")},map:function(e,r,n){for(var t=[],o=0;o<e.length;o++)t.push(r.call(n,e[o],o,e));return t},queryify:function(e){var r=["?"];for(var n in e)if(e.hasOwnProperty(n)&&!ROXEN.isUndefined(e[n]))if(r.length>1&&r.push("&"),r.push(n.toString()),r.push("="),ROXEN.isArray(e[n])){for(var t=[],o=0;o<e[n].length;o++)t.push(ROXEN.escapeURIComponent(e[n][o]));r.push(t.join(","))}else r.push(ROXEN.escapeURIComponent(e[n]));return r.join("")},rtrim:function(e){return e.replace(/\s+$/g,"")},toUTF8:function(e){return unescape(encodeURIComponent(e))},count_inflection:function(e,r,n,t){return 0===e&&t?t:1==e?r:n},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},richtextToPlaintext:function(e){var r=document.createElement("div");e=e.replace(/<\/div>/gi," </div>"),e=e.replace(/<br/gi," <br"),r.innerHTML=e;var n=r.innerText||r.textContent;return n=n.replace(/\r\n/g,"\n"),ROXEN.trim(n)},typeOf:function(e){var r=typeof e;return"object"===r&&(e?ROXEN.isArray(e)&&(r="array"):r="null"),r},substitute:YAHOO.lang.substitute,debug:!1,logger:null,logger_visible:!0,toggle_logger:function(){this.logger_visible?(this.logger.hide(),this.logger_visible=!1):(this.logger.show(),this.logger_visible=!0)},weekStartsOnSunday:function(){var e=["us","cn","jp","ca","za","zw","ke","ph","tw","hk","mx","gt","sv","ni","cr","pa","co","ve","ec","pe","br","bo","cl","ar","il"],r=navigator.language.toLowerCase();if(r.length>=5){var n=r.substr(3,2);if(e.indexOf(n)>=0)return!0}return!1},shortDate:function(e){var r=new Date(1e3*e),n="en-US",t="%b %e, %Y";return YAHOO.util.Date.format(r,{format:t},n).replace("  "," ")},shortDateTime:function(e,r,n){var t;t="number"==typeof e?new Date(1e3*e):e;var o=new Date,a="",i="en-US",u="%b %e, %Y",c=n?"%l:%M %P":"%H:%M",l=31*(t.getMonth()+1)+t.getDate(),f=31*(o.getMonth()+1)+o.getDate();return t.getYear()!=o.getYear()?(a=u,r&&(a+=", "+c)):f-1>l||l>f?(a=u.replace(", %Y",""),a=a.replace(" %Y",""),a=a+", "+c):a=l==f-1?"yesterday, "+c:"today, "+c,YAHOO.util.Date.format(t,{format:a},i)}};e.escape=e.escapeURIComponent,YAHOO.lang.augmentObject(ROXEN,e)}();
Math.uuid=function(){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(n,t){var a,o=r,i=[];if(t=t||o.length,n)for(a=0;n>a;a++)i[a]=o[0|Math.random()*t];else{var u;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",a=0;36>a;a++)i[a]||(u=0|16*Math.random(),i[a]=o[19==a?3&u|8:15&u])}return i.join("")}}();
ROXEN.config=function(){var n=Math.uuid();return{session:n}}();
ROXEN.AFS=function(){function e(e){var n=[],a={},t=!1;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];YAHOO.lang.isString(o)?n.push(r+"="+ROXEN.escapeURIComponent(o)):(a[r]=o,t=!0)}return t&&n.push("__afs="+ROXEN.escapeURIComponent(YAHOO.lang.JSON.stringify(a))),n.join("&")}function n(e){ROXEN.log("ROXEN.AFS: connection error: "+e.status+" "+e.statusText);for(var n=0;n<Y.length;n++){var a=Y[n];X>2&&ROXEN.log("  AFS calling error callback: "+a.name);try{a(e)}catch(t){if(ROXEN.log("AFS: error in callback "+a.name+": "+t),ROXEN.debug)throw t}}k={},H={},y&&(y=0,E(!0)),F=!1}function a(e){ROXEN.log("ROXEN.AFS: JSON parse error: "+e);for(var n=0;n<Y.length;n++){var a=Y[n];X>2&&ROXEN.log("  AFS calling error callback: "+a.name);try{a(e)}catch(e){if(ROXEN.log("AFS: error in callback "+a.name+": "+e),ROXEN.debug)throw e}}k={},H={},y&&(y=0,E(!0)),F=!1}function t(e){var n,t;try{n=YAHOO.lang.JSON.parse(e.responseText)}catch(r){return void a(r)}n._etag=e.getResponseHeader.Etag||e.getResponseHeader.ETag;for(var o=0;o<n.length;o++){var l=n[o],i=l.tag;if(i){X&&ROXEN.log("AFS response: "+l.msg_type+", tag "+i);var c=k[i];if(t=c&&c[0],void 0===c)ROXEN.log("ROXEN.AFS: Warning: Got AFS response with unknown tag: "+l.msg_type);else if(-1==t)X>1&&ROXEN.log("  AFS tagged callback was canceled"),delete k[i];else{if(X>1&&ROXEN.log("  AFS calling tagged callback: "+t.name),ROXEN.debug)t(l);else try{t(l)}catch(r){ROXEN.log("AFS: error in callback "+t.name+": "+r)}delete k[i];var s=c[1];if(s){var g=H[s];g.splice(g.indexOf(i),1)}}}else X&&ROXEN.log("AFS response: "+l.msg_type);for(var O=0;O<w.length;O++){t=w[O],X>2&&ROXEN.log("  AFS calling global callback: "+t.name);try{t(l)}catch(r){ROXEN.log("AFS: error in callback "+t.name+": "+r)}}}y>0&&(y--,y||E(!1)),F=!0}function r(e,n,a,t,r){return i(e,"GET",n,0,a,t,r)}function o(e,n,a,t,r,o){ROXEN.isString(a)?(YAHOO.util.Connect.setForm(a),a=void 0):ROXEN.isObject(a)||(a={});var l=[];if(a){var c=0;for(var s in a)a.hasOwnProperty(s)&&(l[c++]=encodeURIComponent(s)+"="+encodeURIComponent(a[s]))}return i(e,"POST",n,l.join("&"),t,r)}function l(a,r,o,l,i,c){if(ROXEN.isObject(r)||(r={}),i&&(l=ROXEN.bind(i,l)),l){var s=++T+"";X&&ROXEN.log("AFS call: "+a+" "+YAHOO.lang.JSON.stringify(r)+", callback "+l.name+", tag "+s),r.tag=s,k[s]=[l,c]}else X&&ROXEN.log("AFS call: "+a+" "+YAHOO.lang.JSON.stringify(r));l&&c&&(H[c]||(H[c]=[]),H[c].push(r.tag)),r[b]=d,y++;for(var g=A+a+"?"+e(r),O=new FormData,u=0;u<o.length;u++)O.append("upload-file-"+u,o[u]);var f=new XMLHttpRequest;f.open("POST",g,!0),f.onreadystatechange=function(){4===f.readyState&&(200===f.status?t(f):(0===f.status||f.status>=400)&&n(f))},f.send(O)}function i(a,r,o,l,i,c,s){if(ROXEN.isObject(o)||(o={}),c&&(i=ROXEN.bind(c,i)),i){var g=++T+"";X&&ROXEN.log("AFS call: "+a+" "+YAHOO.lang.JSON.stringify(o)+", callback "+i.name+", tag "+g),o.tag=g,k[g]=[i,s]}else X&&ROXEN.log("AFS call: "+a+" "+YAHOO.lang.JSON.stringify(o));o[b]=d,y++;var O=A+a+"?"+e(o),u=YAHOO.util.Connect.asyncRequest(r,O,{cache:!1,success:t,failure:n},l);return i&&s&&(H[s]||(H[s]=[]),H[s].push(o.tag)),u}function c(e){var n=H[e];if(n){for(var a=0;a<n.length;a++)k[n[a]][0]=-1;delete H[e]}}function s(){return F}function g(e,n){return n&&(e=ROXEN.bind(n,e)),w.push(e),e}function O(e){for(var n=0;n<w.length;n++)if(w[n]===e){w.splice(n,1);break}}function u(e,n){return n&&(e=ROXEN.bind(n,e)),Y.push(e),e}function f(e){for(var n=0;n<Y.length;n++)if(Y[n]===e){Y.splice(n,1);break}}function R(e){-1!=_||ROXEN.isUndefined(e.poll_interval)||(h=e.poll_interval)}function E(e){if(_>=-1&&!S){var n=1e3*(e?m:h);X>2&&ROXEN.log("AFS poll delay "+n+" ms"),S=window.setTimeout(function(){S=void 0,r("poll",{timeout:_,interval:h},R)},n)}}function N(e){e&&(e.actions_prefix&&(A=e.actions_prefix),e.session_var&&(b=e.session_var),e.poll_timeout&&(_=e.poll_timeout)),X&&ROXEN.log("AFS init"),F=!1,y=0,k={},S&&(clearTimeout(S),S=void 0),_>=-1&&!y&&r("poll",{timeout:_,interval:h},R),C=!0}function p(){return C}function v(e,n,a){var t={cache:!1,success:function(e){n.call(a,e,"AFS_REQUEST_SUCCESS")},failure:function(e){ROXEN.log("ROXEN.AFS: connection error: "+e.status+" "+e.statusText),n.call(a,e,"AFS_REQUEST_FAILURE")}};return YAHOO.util.Connect.asyncRequest("GET",e,t)}var S,X=0,d=ROXEN.config.session,A="/actions/",b="session_id",_=-1,h=30,m=30,F=!1,y=0,k={},H={},T=0,w=[],Y=[],C=!1,C=!1;return{call:r,post:o,post_files:l,abort:c,has_connection:s,add_global_callback:g,remove_global_callback:O,add_error_callback:u,remove_error_callback:f,init:N,initialized:p,request:v}}();
!function(){ROXEN.run={},ROXEN.main=function(n){ROXEN.AFS.init(n)}}();
//# sourceMappingURL=roxen-all.min.js.map
