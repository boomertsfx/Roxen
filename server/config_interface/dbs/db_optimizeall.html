<topmenu base="../" selected="dbs" />
<trans-reg project="roxen_config" path="translations/%L/roxen_config.xml"/>

<content>
  <cv-split>
    <subtablist width="100%">
      <st-tabs></st-tabs>
      <st-page>
				<cf-title><translate id="538">Optimize all tables</translate></cf-title>

				<if variable="form.c = execute">
				  <div id="result" data-db-href='/dbs/db_repair_optimize_all_ajax.pike'
               data-db-action='optimize'
               data-wizid='&usr.set-wiz-id;'
				       data-progress-msg='Optimizing tables...'>
				  	<i class='fa fa-spinner fa-pulse'></i>
				  	<span class='text'>Initializing query...</span>
				  </div>
					<script src='/js/fix-db.js' async=''></script>
			  </if>
			  <else>
			  	<div class='notify warn'>
					  <translate id="1042">
					    <b>Warning!</b><br />
					    This might take a long time to complete.<br/>
					    The amount of time this takes depends on how large the tables are.<br/>
					  </translate>
					</div>

				  <cf-perm perm="Edit Global Variables">
				    <link-gbutton type='cancel' href='index.html'>Cancel</link-gbutton>
				    <form id="execform" action="&page.path;" method="post">
				    	<roxen-wizard_id_variable />
				    	<input type="hidden" name="c" value="execute" />
				    	<submit-gbutton2 type='ok'>Optimize all tables</submit-gbutton2>
			    	</form>
				  </cf-perm>
				</else>
      </st-page>
    </subtablist>
  </cv-split>
</content>
