subject: Roxen 5.5: Multiple fixes:
from: e463b681cf160a56487d41d3d0ba819732b3906e
to: 9a808870d2e424a1773f1668d4031f8fb8b443b2
originator: wellhardh@roxen.com
depends: 2015-06-05T085142
restart: true

Multiple fixes:

  * SQLKey: Censor SQL-URLs. Fixes [bug 7439].

  * Moved last_garb timestamp from module variable to external state file.
    
    This removes the need of calling save() and thus update the config
    file after each garb run.

  * Fix testsuite issue reported in [bug 7520].

  * Loader: Reverse the packages search order.
    
    This is in preparation of fixing [bug 7530], and has the effect
    that the first entry in the package directory search path always
    is "$LOCALDIR".

  * Loader: lopen() et all now use roxen_path().
    
    This should cause eg the RSA certificate action to once again
    create the files where it expects them to be.
    
    Fixes [bug 7530].

  * Branding: Support sitebuilder being a package.

  * SQLKey: Improved censoring of passwords. Fixes [bug 7439] some more.
    
    This attempts to detect and undo the mangling done
    by DBManager.sql_cache_get().

  * TagSQLQuery: Removed remaining leakage of SQLKey to backtraces.
    
    The SQLKey could leak to the backtrace if an invalid rowinfo was used.
    
    Fixes remainder of [bug 7439}.
